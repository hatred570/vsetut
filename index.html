<script>
document.addEventListener('DOMContentLoaded', () => {

    // üõë –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–ª–∏ –Ω–µ –≤ Telegram
    if (!window.Telegram || !Telegram.WebApp) {
        document.body.innerHTML = `
            <div style="color:#777;font-family:sans-serif;text-align:center">
                –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω—É—Ç—Ä–∏ Telegram
            </div>
        `;
        return;
    }

    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    const VALID_KEY = 'bozz1';
    const BOT_LINK = 'https://t.me/diavozbuczulolzodbot';
    const REDIRECT_FLAG = 'redirect_done';

    const loading = document.getElementById('loading');
    const message = document.getElementById('message');

    const startParam = Telegram.WebApp.initDataUnsafe?.start_param;

    // –∑–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–∞
    if (sessionStorage.getItem(REDIRECT_FLAG)) {
        loading.style.display = 'none';
        message.style.display = 'block';
        message.innerText = '–ì–æ—Ç–æ–≤–æ';
        return;
    }

    if (startParam === VALID_KEY) {
        sessionStorage.setItem(REDIRECT_FLAG, '1');

        setTimeout(() => {
            Telegram.WebApp.openTelegramLink(BOT_LINK);

            setTimeout(() => {
                window.location.href = BOT_LINK;
            }, 300);
        }, 600);
    } else {
        loading.style.display = 'none';
        message.style.display = 'block';
        message.innerText = '–í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
    }
});
</script>

